{"version":3,"sources":["../src/resource.js"],"names":["define","$","config","init","document","ready","resourceobject","getElementById","checkIframeLoaded","iframe","iframeDoc","contentDocument","contentWindow","readyState","window","setTimeout","addElementsCss","addActivityNavigation","$cssLink","contents","find","font","wwwroot","css","insertBefore","$resourceBody","append","$preFooter","attr","clone","appendTo"],"mappings":"AAqBAA,OAAM,+BAAC,CAAC,QAAD,CAAW,aAAX,CAAD,CAA4B,SAASC,CAAT,CAAYC,CAAZ,CAAoB,CAElD,MAAO,CACHC,IAAI,CAAE,eAAW,CACbF,CAAC,CAACG,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAW,CACzBC,CAAc,EACjB,CAFD,EAOA,QAASA,CAAAA,CAAT,EAA0B,CACtB,GAAIF,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAAJ,CAA+C,CAC3CC,CAAiB,EACpB,CACJ,CAKD,QAASA,CAAAA,CAAT,EAA6B,IAErBC,CAAAA,CAAM,CAAGL,QAAQ,CAACG,cAAT,CAAwB,gBAAxB,CAFY,CAGrBG,CAAS,CAAGD,CAAM,CAACE,eAAP,EAA0BF,CAAM,CAACG,aAAP,CAAqBR,QAHtC,CAKzB,OAAQM,CAAS,CAACG,UAAlB,EACI,IAAK,UAAL,CACIC,MAAM,CAACC,UAAP,CAAkBC,CAAlB,CAAkC,GAAlC,EACAF,MAAM,CAACC,UAAP,CAAkBE,CAAlB,CAAyC,GAAzC,EACA,MACJ,QACIH,MAAM,CAACC,UAAP,CAAkBP,CAAlB,CAAqC,GAArC,EANR,CAQH,CAKD,QAASQ,CAAAA,CAAT,EAA0B,IAClBE,CAAAA,CAAQ,CAAGjB,CAAC,CAAC,iBAAD,CAAD,CAAqBkB,QAArB,GAAgCC,IAAhC,CAAqC,2BAArC,CADO,CAElBC,CAAI,CAAG,gBAAiBnB,CAAM,CAACoB,OAAxB,CAAkC,2DAFvB,CAGlBC,CAAG,CAAG,gBAAiBrB,CAAM,CAACoB,OAAxB,CAAkC,4DAHtB,CAItBrB,CAAC,CAACoB,CAAD,CAAD,CAAQG,YAAR,CAAqBN,CAArB,EACAjB,CAAC,CAACsB,CAAD,CAAD,CAAOC,YAAP,CAAoBN,CAApB,CACH,CAKD,QAASD,CAAAA,CAAT,EAAiC,CAC7B,GAAIQ,CAAAA,CAAa,CAAGxB,CAAC,CAAC,iBAAD,CAAD,CAAqBkB,QAArB,GAAgCC,IAAhC,CAAqC,MAArC,CAApB,CACAK,CAAa,CAACC,MAAd,CAAqB,+BAArB,EACA,GAAIC,CAAAA,CAAU,CAAG1B,CAAC,CAAC,iBAAD,CAAD,CAAqBkB,QAArB,GAAgCC,IAAhC,CAAqC,aAArC,CAAjB,CACAnB,CAAC,CAAC,wCAAD,CAAD,CAA4C2B,IAA5C,CAAiD,QAAjD,CAA2D,SAA3D,EACA3B,CAAC,CAAC,sBAAD,CAAD,CAA0B4B,KAA1B,GAAkCC,QAAlC,CAA2CH,CAA3C,EACA1B,CAAC,CAAC,UAAD,CAAD,CAAc4B,KAAd,GAAsBC,QAAtB,CAA+BH,CAA/B,EACA1B,CAAC,CAAC,cAAD,CAAD,CAAkB4B,KAAlB,GAA0BC,QAA1B,CAAmCL,CAAnC,CACH,CACJ,CAxDE,CA0DV,CA5DK,CAAN","sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n *\n * @copyright   2021 FCAV\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/config'], function($, config) {\n\n    return {\n        init: function() {\n            $(document).ready(function() {\n                resourceobject();\n            });\n\n            /**\n             * Verifica a página possui iframe\n             */\n            function resourceobject() {\n                if (document.getElementById('resourceobject')) {\n                    checkIframeLoaded();\n                }\n            }\n\n            /**\n             * Verifica se o iframe da página já foi carregado\n             */\n            function checkIframeLoaded() {\n                // Get a handle to the iframe element\n                var iframe = document.getElementById('resourceobject');\n                var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;\n\n                switch (iframeDoc.readyState) {\n                    case \"complete\":\n                        window.setTimeout(addElementsCss, 100);\n                        window.setTimeout(addActivityNavigation, 250);\n                        break;\n                    default:\n                        window.setTimeout(checkIframeLoaded, 100);\n                }\n            }\n\n            /**\n             * Adiciona css\n             */\n            function addElementsCss() {\n                var $cssLink = $(\"#resourceobject\").contents().find(\"head > link:first-of-type\");\n                var font = '<link href=\"' + config.wwwroot + '/theme/efape_ava_v2/style/fonts.css\" rel=\"stylesheet\">';\n                var css = '<link href=\"' + config.wwwroot + '/theme/efape_ava_v2/style/footer.css\" rel=\"stylesheet\">';\n                $(font).insertBefore($cssLink);\n                $(css).insertBefore($cssLink);\n            }\n\n            /**\n             * Adiciona barra de navegação de atividades e rodapé\n             */\n            function addActivityNavigation() {\n                var $resourceBody = $(\"#resourceobject\").contents().find(\"body\");\n                $resourceBody.append('<div id=\"pre-footer\"></div>');\n                var $preFooter = $(\"#resourceobject\").contents().find(\"#pre-footer\");\n                $('.activity-navigation a, #page-footer a').attr('target', '_parent');\n                $('.activity-navigation').clone().appendTo($preFooter);\n                $('.contact').clone().appendTo($preFooter);\n                $('#page-footer').clone().appendTo($resourceBody);\n            }\n        }\n    };\n});"],"file":"resource.min.js"}